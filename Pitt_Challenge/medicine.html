<!DOCTYPE html> 
<html lang="en-US">
    <head> 
        <title> Meditrack </title>
        <link rel="stylesheet" href="medicine.css">       
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

        <!-- jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

        <script src="medicine.js"></script>
        
        <!-- Latest compiled JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <meta charset="utf-8">
    </head>

    <body>
        <nav class="navbar navbar-inverse navbar-fixed-top" style="margin:0px;">
            <div class="container-fluid" id="header">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navBar">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span> 
                    </button>
                    <a class="navbar-brand" id="website_title" href="index.html">Meditrack</a>
                </div>
                <div class="collapse navbar-collapse" id="navBar">
                    <ul class="nav navbar-nav">
                        <li><a href="home.html"> Home </a></li>
                        <li class="active"><a href="#" style="background-color:#4c0000"> Medicine </a></li>
                        <li><a href="hospitals.html"> Hospitals </a></li>
                    </ul>   
                    <ul class="nav navbar-nav navbar-right">
                      <li><a href="index.html">Logout</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <div style="height:50px;"> </div>
        <div class="container-fluid" id="outer_intro">
            <div id="intro"> 
                <h1 id="intro_items"> Medicine Tracking </h1>
            </div>
        </div>  
        
        
        <div class="container" style="margin-top:100px">
            <table class="table table-bordered table-hover" id="med_Table">
                <thead>
                    <tr>
                        <th> Medicine</th>
                        <th> When to Take </th>
                        <th> Dosage </th>
                        <th> Amount Left</th>
                    </tr>
                </thead>
            </table>
        </div>
        
        <div id = "take" style="display:flex; justify-content:center; align-items:center; width:100%;">             
             <button id = "take_button" type="button" class="btn btn-success" style="width: 20%;">Take Pill</button>
        </div>
        
        <div id="details">
            <div id='details_inside'> 
                <h3 id="feeling"> <!-- filled by JS --> </h3>
                <div class="btn-group">
                    <button type="button" class="btn btn-default" id="button1"> <span class="glyphicon glyphicon-thumbs-up"></span> </button>
                    <button type="button" class="btn btn-default" id="button2"> <span class="glyphicon glyphicon-thumbs-up"></span> </button>
                    <button type="button" class="btn btn-default" id="button3"> <span class="glyphicon glyphicon-thumbs-up"></span> </button>
                    <button type="button" class="btn btn-default" id="button4"> <span class="glyphicon glyphicon-thumbs-up"></span> </button>
                    <button type="button" class="btn btn-default" id="button5"> <span class="glyphicon glyphicon-thumbs-up"></span> </button>
                </div>
            </div>
        </div>
        
        <div id="details2">
            <div id = 'details_inside'> 
                <h3 style="padding: 5px"> Does it feel better or worse than normal? </h3>
                <div class="btn-group" id="better_group">
                    <button type="button" class="btn btn-defualt" id='worse'>
                    <span class="glyphicon glyphicon-thumbs-down"></span>
                    </button>
                    <button type="button" class="btn btn-defualt" id='better'>
                    <span class="glyphicon glyphicon-thumbs-up"></span>
                    </button>
                </div>
            </div>
        </div>
        
        <div id="details3" style="padding-bottom: 100px; position: absolute;">
            <div style="float:right;">
                <button type="button" class="btn btn-default" id="submit"> Submit </button>
            </div>
        </div>
        
        <script> 
            /*var array1 = ['Advil', 'Before Breakfast and Dinner', '150mg', '60', 'Sprained Thumb', 'June 2016'];
            
            var array2 = ['Zoloft', 'Before Breakfast', '100mg', '40', 'Depression/OCD', 'August 2015'];
            
            var array3 = ['Prozac', 'Before Bed', '75mg', '55', 'OCD', 'January 2015'];
            
            var array4 = [array1, array2, array3];
            console.log(localStorage.getItem('email'));
            var email = localStorage.getItem('email');
            var array5 = [array1, array2];
            var medicines = [[email, array4],['williamhhinard@gmail.com',array5]]; 
            localStorage.medicines = JSON.stringify(medicines);
            var array = JSON.parse(localStorage.getItem('medicines'));*/

            
            var myTable = document.getElementById("med_Table");
            var tableBody = document.createElement('TBODY');

            myTable.appendChild(tableBody);

            var medicines = JSON.parse(localStorage.getItem('medicines'));
            var email = sessionStorage.getItem('email');
            for(i = 0; i < medicines.length; i++){
                if(email == medicines[i][0]){
                    var index = i;
                    break;
                }
            }
            sessionStorage.setItem('index', index);
            if(i == medicines.length){ alert("You currently have no perscribed medications");}
            else{
                var med = medicines[index][1];
                for(i = 0; i < med.length; i++){
                    var tr = document.createElement('TR');
                    for(k = 0; k < 4; k++){
                        var td = document.createElement('TD');
                        td.textContent = med[i][k];
                        tr.appendChild(td);
                    }
                    tr.id = "row";
                    tr.className = 'table_row';  
                    tableBody.appendChild(tr);
                }
            }
        </script>   
    </body>
</html>
