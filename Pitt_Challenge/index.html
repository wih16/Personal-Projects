<!DOCTYPE html> 
<html lang="en-US">
    <head> 
        <title> Meditrack </title>
        <link rel="stylesheet" href="login.css">       
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

        <!-- jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        

        <!-- Latest compiled JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <meta charset="utf-8">
    </head>

    <body>
        <nav class="navbar navbar-inverse navbar-fixed-top" style="margin:0px;">
            <div class="container-fluid" id="header">
                <div class="navbar-header">
                    <a class="navbar-brand" id="website_title" href="index.html"><b>Meditrack</b></a>
                </div>
            </div>
        </nav>
        <div style="height:50px;"> </div>

        <div class="row" style="height:100px;">
            <div class="col-sm-6">
                <div style="margin-top: 30px; width:100%; margin-left:10%; font-size:40px;margin-bottom:none;"> <br>Do you <i>have</i> an account?</div>
            </div>
            <div class="col-sm-6">
                <div style="margin-top: 30px; width:100%; margin-left:10%; font-size:40px;margin-bottom:none;"><br> Do you <i>need</i> an account?</div>
            </div>
        
        </div>
        <div class="row">
            <div class="col-sm-6" >
                <div style="margin-top: 30px; width:50%; margin-left:30%; border-width: 0px 0px 2px 0px; border-style: dashed;">
                    <h1>Login:</h1>
                </div>
                <form style="margin-top: 30px; width:50%; margin-left:30%"> 
                    <div class="form-group">
                      <label for="usr">Email:</label>
                      <input type="text" class="form-control" id="email2">
                    </div>
                    <div class="form-group">
                      <label for="pwd">Password:</label>
                      <input type="password" class="form-control" id="pwd2">
                    </div>
                    <div class="form-group">
                        <a class="btn btn-success" id="enter" href="javascript: click2();">Enter</a>
                    </div>
                </form>
            </div>
            <div class="col-sm-6">
                <div style="margin-top: 30px; width:50%; margin-left:30%; border-width: 0px 0px 2px 0px; border-style: dashed;">
                    <h1>Sign Up:</h1>
                </div>
                <form style="margin-top: 30px; width:50%; margin-left:30%"> 
                    <div class="form-group">
                      <label for="usr">Name:</label>
                      <input type="text" class="form-control" id="usr">
                    </div>
                    <div class="form-group">
                      <label for="usr">Email:</label>
                      <input type="text" class="form-control" id="email">
                    </div>
                    <div class="form-group">
                      <label for="pwd">Password:</label>
                      <input type="password" class="form-control" id="pwd">
                    </div>
                    <div class="form-group">
                        <a class="btn btn-success" id="enter" href="javascript: click();">Enter</a>
                    </div>
                </form>
            </div>
        </div>
        <div class="row" style="margin-top:50px;">
            <div class="col-sm-3" id='menu_info'>
                <div id="menu_inner"> <span class="glyphicon glyphicon-pencil"></span> Record Health Data </div>
            </div>
            <div class="col-sm-6" id='menu_info'><div id="menu_inner">
                <span class="glyphicon glyphicon-share"></span> Share Information with Doctors</div>
            </div>
            <div class="col-sm-3" id='menu_info'><div id="menu_inner">
                <span class="glyphicon glyphicon-map-marker"></span> Find Hostpitals
            </div></div>
        </div>
        <script>
            function click2(){
                var email = $('#email2').val();
                var password = $('#pwd2').val();
                
                var people = JSON.parse(localStorage.people);
                for(i = 0; i < people.length; i++){
                    console.log(email);
                    console.log(people[i][1]);
                    if(email == people[i][1]){
                        console.log(password);
                        console.log(people[i][2]);
                        if(password == people[i][2]){  
                            sessionStorage.setItem('email',email)
                            window.location.href = 'home.html';
                            break;
                        }
                        alert("Please enter a valid password");
                        window.location.href = 'index.html'
                    }                    
                }
                if (i==people.length){
                    alert("This isn't a valid email. Create an account");
                }                
            }
            
            function click(){
                var people = JSON.parse(localStorage.getItem('people'));
                people = people || [];
                var name = $('#usr').val();
                var email = $('#email').val();
                var pass = $('#pwd').val();
                console.log(name);
                console.log(email);
                console.log(pass);

                if(name == '' || email == '' || pass == ''){
                    alert("Please fill out every part");
                    window.location.href = 'index.html';
                }
                else{
                    var new_array = [name, email, pass];
                    people.push(new_array);

                    sessionStorage.setItem('email', email);
                    localStorage.people = JSON.stringify(people);

                    /*delete localStorage.people;  */ 

                    window.location.href = "home.html";  
                }
            }
        </script>
        
    </body>
</html>